<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>æ—¥è¯­ AI ç§æ•™</title>
    
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="æ—¥è¯­ç§æ•™">
    
    <style>
        :root { --primary: #6c5ce7; --bg: #f8f9fc; --accent: #ff7675; --success: #00b894; }
        
        /* é€‚é… App è§†å£ï¼Œé˜²æ­¢æ»‘åŠ¨ */
        body { 
            font-family: 'Hiragino Sans', 'PingFang SC', sans-serif; 
            background: var(--bg); 
            margin: 0; 
            padding: 15px; 
            display: flex; 
            flex-direction: column; 
            align-items: center;
            -webkit-tap-highlight-color: transparent;
        }

        .card { 
            background: white; 
            border-radius: 24px; 
            padding: 20px; 
            width: 100%; 
            max-width: 500px; 
            box-sizing: border-box;
            box-shadow: 0 10px 30px rgba(0,0,0,0.05); 
        }
        
        textarea { 
            width: 100%; 
            height: 100px; 
            border: 1.5px solid #eee; 
            border-radius: 15px; 
            padding: 12px; 
            font-size: 1rem; 
            box-sizing: border-box; 
            resize: none; 
            outline: none;
            transition: 0.3s;
        }
        textarea:focus { border-color: var(--primary); }

        /* å¥å­æ˜¾ç¤ºåŒº */
        .sentence-group { 
            padding: 18px; 
            border-radius: 15px; 
            margin-bottom: 12px; 
            cursor: pointer; 
            transition: 0.3s; 
            border: 2px solid #f9f9f9; 
            background: #fff; 
        }
        .sentence-group.active { 
            border-color: var(--primary); 
            background: #f1f0ff; 
            transform: translateY(-2px);
        }
        .jp-text { font-size: 1.4rem; color: #2d3436; margin-bottom: 8px; font-weight: 600; line-height: 1.4; }
        .tr-text { font-size: 0.9rem; color: #a0a0a0; font-style: italic; }

        /* æŒ‰é’®å¸ƒå±€ */
        .controls { 
            display: grid; 
            grid-template-columns: 1fr 1fr 1fr; 
            gap: 10px; 
            margin: 15px 0; 
        }
        button { 
            padding: 14px 5px; 
            border: none; 
            border-radius: 12px; 
            font-weight: bold; 
            cursor: pointer; 
            color: white; 
            transition: 0.2s; 
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 5px;
        }
        .btn-parse { background: var(--primary); grid-column: span 3; font-size: 1.1rem; }
        .btn-play { background: #00cec9; }
        .btn-pause { background: #fab1a0; }
        .btn-mic { background: var(--accent); }
        
        button:active { transform: scale(0.95); opacity: 0.8; }
        button:disabled { background: #dfe6e9; cursor: not-allowed; }

        /* å½•éŸ³åŠ¨ç”» */
        .recording { animation: pulse 1.5s infinite; background: #d63031 !important; }
        @keyframes pulse { 0% { box-shadow: 0 0 0 0 rgba(214, 48, 49, 0.4); } 70% { box-shadow: 0 0 0 10px rgba(214, 48, 49, 0); } 100% { box-shadow: 0 0 0 0 rgba(214, 48, 49, 0); } }

        /* æ‰“åˆ†æ¿ */
        #score-board { 
            margin: 20px 0; 
            padding: 20px; 
            border-radius: 20px; 
            background: #fff; 
            border: 4px solid var(--primary); 
            display: none; 
            text-align: center;
            animation: fadeIn 0.5s;
        }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .score-num { font-size: 3.5rem; font-weight: 900; color: var(--primary); line-height: 1; }
        .score-label { font-size: 0.7rem; color: #aaa; letter-spacing: 3px; margin-bottom: 5px; }

        #display-area { width: 100%; margin-top: 10px; }
    </style>
</head>
<body>

<div class="card">
    <textarea id="input-text" placeholder="åœ¨æ­¤ç²˜è´´æ—¥è¯­æ–°é—»æˆ–æ–‡ç« ..."></textarea>
    
    <div class="controls">
        <button class="btn-parse" id="parse-btn" onclick="handleAutoProcess()">âœ¨ æ™ºèƒ½è§£æç¿»è¯‘</button>
        <button id="play-btn" class="btn-play" onclick="resumeSpeak()" disabled>â–¶ï¸ æ’­æ”¾</button>
        <button id="pause-btn" class="btn-pause" onclick="pauseSpeak()" disabled>â¸ æš‚åœ</button>
        <button id="mic-btn" class="btn-mic" onclick="startRecording()" disabled>ğŸ¤ è·Ÿè¯»</button>
    </div>

    <div id="score-board">
        <div class="score-label">PRONUNCIATION SCORE</div>
        <div id="score-display" class="score-num">0</div>
    </div>

    <div id="display-area"></div>
